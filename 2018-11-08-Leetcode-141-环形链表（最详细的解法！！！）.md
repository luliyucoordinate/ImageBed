---
layout: post
title: Leetcode 141：环形链表（最详细的解法！！！）
category : 算法
tags : [python, c, c++]
stickie: true
date: 2018-11-08 00:00:00
---

给定一个链表，判断链表中是否有环。

**进阶：**
你能否不使用额外空间解决此题？

**解题思路**

一个最简单的做法就是将链表反转，我们看链表反转后有什么问题，关于链表反转可以看这篇[Leetcode 206:反转链表（最详细解决方案！！！）](https://blog.csdn.net/qq_17550379/article/details/80647926)。

```
1 -> 2 -> 3 -> 4 -> 5
　　　　　  ^         |
　　　　　  |         v
　　　　　  ___________
```

我们开始反转链表

```
1 <- 2 <- 3*<- 4 <- 5
　　　　　  |         ^
　　　　　  v         |
　　　　　  ___________
```

我们看反转到`3`，现在不会停止，而是会继续

```
1 <- 2 -> 3 <- 4 <- 5
　　　　　  |         ^
　　　　　  v         |
　　　　　  ___________
```

最后就变成了

```
1 -> 2 -> 3 <- 4 <- 5
| 　　　　 |         ^
head　　　 v         |
　　　　　 ___________
```

此时我们发现又回到了起点处，所以我们最后只要判断返回的节点是不是`head`，就可以判断是不是有环。

```python
class Solution(object):
    def reverseList(self, head):
        pre = None
        cur = head
        while cur != None:
            lat = cur.next
            cur.next = pre
            pre = cur 
            cur = lat

        return pre

    def hasCycle(self, head):
        """
        :type head: ListNode
        :rtype: bool
        """
        if head != None and head.next != None\
                and self.reverseList(head) == head:
            return True
        return False
```

这个问题还有一个非常棒的解法，就是使用快慢指针。我们建立两个指针，一个`slow`一个`fast`，我们令移动速度关系为$V_{fast}=2*V_{slow}$，我们假设环的长度为$V_{slow}*time$的倍数`k`，如果此时`slow`和`fast`都在环内的话，那么在一定时间内两者必定可以相遇（使用相对速度很好理解）。

```python
class Solution(object):
    def hasCycle(self, head):
        """
        :type head: ListNode
        :rtype: bool
        """
        if head == None:
            return False
        
        fast, slow = head, head
        while fast.next != None and fast.next.next != None:
            slow = slow.next
            fast = fast.next.next
            if slow == fast:
                return True

        return False
```

reference:

https://leetcode.com/problems/linked-list-cycle/discuss/44498/Just-reverse-the-list

https://leetcode.com/problems/linked-list-cycle/discuss/44489/O(1)-Space-Solution

**我将该问题的其他语言版本添加到了我的[GitHub Leetcode](https://github.com/luliyucoordinate/Leetcode)**

**如有问题，希望大家指出！！！**