---
layout: post
title: linux Day2
category : linux
tags : [linux]
stickie: true
---


int main(int argc,char *argv[])
===

argc        代表参数个数  
a.out 1 2   表示三个参数  
argv        表示指向参数的指针数组  

数组指针与指针数组
===

int (*p)[]    数组指针（行指针）类似于函数指针  
int *p[]      指针数组

gcc指令
===

gcc &ndash;o hello hello.c           编译hello.c 文件生成hello文件  
gcc &ndash;o hello1.c &ndash;E hello.c     只进行预编译，预编译将结果输出到hello1.c文件中  
gcc &ndash;o hello.o &ndash;c hello1.c     只进行编译不链接  
gcc &ndash;o hello hello.o           连接  
-o filename                    输出文件名  
-g                             包含调试信息  
-I                             连接指定库文件  
-O                             优化编译后的代码  
-w                             关闭所有警告  
-Wall                          开启所有警告  
编译c++文件  
连接的时候 gcc &ndash;o hello hello.o &ndash;lstdc++

编译
===

预编译-&gt;编译-&gt;连接  
预编译：头文件  
编译：生成目标代理 *.o  
连接：连接库代码，生成可执行文件  

ldd+执行文件   查看用到哪些库文件  
nm+执行文件   列出某些文件中的符号  
c++在编译完代码后函数名称会发生改变，主要是由于函数重载，所以c++写不了dll文件  

安装文件
===

rpm &ndash;ivh     安装软件  
rpm &ndash;e       卸载软件

makefile规则
===

```shell
start:hello.o            表示需要依赖 .o文件
        gcc &ndash;o hello hello.o
        @echo &lsquo;--------------------------&lsquo;        表示只输出结果
hello.o:
        gcc &ndash;o hello.o &ndash;c hello.c
```
注意不是空格键而是tab键  
make执行文件  
make target 执行表号下的语句  

变量varname=some_text  
$(varname)引用该变量  
例如：CC=gcc  
gcc 改为 $(CC)  

```shell
CC=gcc  
SRCS=hello.c
OBJS=$(SRCS:.c=.o)    将SRCS变量中的.c 替代为 .o
EXEC=hello
```
模式规则  
.SUFFIXES:.c .o   便是两个文件有关联  
表示任意x.c文件与x.o文件 

```
- .c.o:  任何x.o文件都从x.c编译而来  
```
例子：

```shell
.SUFFIXES:.c .o    //.c和.o建立关联
CC=gcc
SRCS=hello.c\
        add.c    //同时编译两个.c文件
OBJS=$(SRCS:.c=.o)    将SRCS变量中的.c 替代为 .o //ORJS=hello.o add.o
EXEC=hello
start:$(OBJS)    //依赖hello.o add.o
        $(CC)  &ndash;o  $(EXEC)  $(OBJS)
        @echo  &lsquo;---------------------ok---------------------&lsquo;
.c.o:
        $(CC)  -o  $@  -c  $&lt;    //自动根据$(OBJS) 中.o的数量循环编译, 直到编
&nbsp;                                //译完所有的.c文件
clean:
        Rm  &ndash;f  $(OBJS)
```

常见的make错误
===

No rule to make target &lsquo;target&rsquo; .Stop  
没有规则可以用 
;target; is up to date  
target 相关文件没有变化 
command : Command not found 
make找不到命令  
missing separator. Stop.  
空格与tab的问题
