---
layout: post
title: 字节跳动2019笔试：立方体塔（超详细的解法！！！）
category : 算法
tags : [bytedance]
stickie: true
date: 2019-6-26 00:00:00
---

小方有w个白色立方体和b个黑色立方体，现在小方想把它们堆成一个立方体塔。

一座高度为h的立方体塔，最底层有h个立方体，每往上一层，所需立方体减一，直到最高层只需要一个立方体。

为了让这座塔看起来美观，小方希望，每一层都只能用一种颜色的立方体。

小方希望把这座塔叠的尽可能高，因此他想知道塔的最大高度是多少，以及这个高度的立方体塔能有几种。

两种立方体塔，当且仅当至少有一层的颜色是不同的，则被认为是不同的。

**输入格式**

共一行，包含两个整数w和b。

**输出格式**

共一行，包含两个整数h和c，分别表示最高塔的高度以及此高度塔的种类数。

因为种类数可能较多，请将c对$10^9+7$取模后的值输出。

**数据范围**

$0≤w,b≤10^5$

**输入样例**：

```
1 1
```

**输出样例**：

```
1 2
```

**解题思路**

首先我们计算一下不考虑颜色的情况下最大高度（理论高度）是多少，这是一个等差数列求和问题

- $\frac{(1+h)*h}{2}\leq(w+b)$

为了解题的方便，我们要证明这样一个性质

> 1\~$\sum_1^ni$中的任意数一定可以通过1~n其中几个数表示。

证明如下：

假设`n=h-1`成立，也就是1\~$\sum_{i=1}^{h-1}i$中的任意数一定可以通过1\~(h-1)其中几个数表示。那么显然对于1\~h所有数可以表示h\~$\sum_{i=1}^{h}i$的任意数。那么也就是当$h<\sum_{i=1}^{h-1}i$时，我们证明的目标是成立的，也就是当$h\geq2$的时候成立。而$h=1$时候显然成立。所以得证。

有了这个性质，那么我们的第一个问题就很好处理了，也就是最大高度一定是理论高度。接下来的问题就是求方案数，我们假设最后的方案中白色立方体有`a`个，黑色立方体有`b`个。那么最后的方案数就是1\~h这么多个数中取出若干数并且这些数的和为`a`，总共有多少种取法？这是一个经典的`01背包`问题。

那么现在的问题就变成了`a`是多少？很显然`a`最大是$min(w,\frac{(h+1)h}{2} )$，最小是$max(0, \frac{(h+1)h}{2})$。最后的结果就是将这个区间内的所有结果累加即可。

```cpp
#include <iostream>
#include <math.h>
using namespace std;
typedef long long LL;

const int MOD = 1e9 + 7;
int w, b;
LL dp[100010];

int main()
{
    cin >> w >> b;
    int h = (sqrt(8*(w + b) + 1) - 1)/2;
    h = h*(h + 1)/2 > (w + b) ? h-1 : h;
    
    dp[0] = 1;
    for (int i = 1; i <= h; ++i)
    {
        for (int j = w + 1; j >= i; --j)
        {
            dp[j] = (dp[j] + dp[j-i]) % MOD;
        }
    }
    
    int l = max(0, (h + 1)*h/2 - b);
    int r = min(w, (h + 1)*h/2);
    LL res = 0;
    for (int i = l; i <= r; ++i) res = (res + dp[i]) % MOD;
    cout << h << " " << res << endl;
}
```

**如有问题，希望大家指出！！！**