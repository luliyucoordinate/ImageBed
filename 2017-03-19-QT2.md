---
layout: post
title: QT
category : QT
tags : [network, QT, cpp]
stickie: true
---


Qt布局
===

通常，子Widget时通常使用布局对象在窗口中进行排列的，而不是通过指定位置和大小进行排列的。  
在此，构造一个并列的标签和行编辑框Widget
```c++
QLabel *label = new QLabel(tr(“Name:”));
QLineEdit *lineEdit = new QLineEdit();
QHBoxLayout *layout = new QHBxLayout();
layout->addWidget(label);
layout->addWidget(lineEdit);
window->setLayout(layout);
```
由于Widget可包含其他Widget，所以布局可用来提供按不同层次分组的Widget。  
这里，要在显示查询结果的表视图上方、窗口顶部的行编辑框旁，显示一个标签

```c++
QLabel *queryLabel = new QLabel(tr(“Query:”));
QLineEdit *queryEdit = new QLineEdit();
QTableView *resultView = new QTableView();
QHBoxLayout *queryLayout = new QHBoxLayout();
queryLayout->addWidget(queryLabel);
queryLayout->addWidget(queryEdit);
QVBoxLayout *mainLayout = new QVBoxLayout();
mainLayout->addLayout(queryLayout);
mainLayout->addWidget(resultView);
window->setLayout(mainLayout);
```


QGridLayout控件对齐
---
```c++
layout->addWiget(label, 0, 0);    注意在后面加上两个参数，标识位置
```
addWidget()方法用于向布局中加入需要的控件

```c++
void addWidget{
	QWidget widget;
	int fromRow,
	int fromColumn,
	int rowSpan,                //占用的行数
	int columnSpan,             //占用的列数
	Qt::Alignment alignment=0   //对齐方式
}
```
addLayout()方法用于向布局中加入需要布局的字布局，addLayout()的函数

```c++
void addLayout{
	QLayout *layout,
	int row,
	int column,
	int rowSpan,
	int columnSpan,
	Qt::Alignment alignment=0
}
```


label设置图像
---
```c++
QPixmap icon(“1.png”);
label->setPixmap(icon);
label->resize(icon.width(), icon.height());
```
layout设置控件的间距

```c++
layout->serSpacing(20);
```
layout设置站位比

```c++
layout->setColumnStretch(0,1);    //设置每列的站位比
```
layout设置边距

```c++
layout->setMargin(10);
```
layout大小与控件最合适

```c++
layout->setSizeConstraint(QLayout::SetFixedSize);
```


QTimer\QTime
---

QTimer是定时器，QTime是显示系统时间的，用法：

```c++
// QTimer
QTimer *timer = new QTimer();
connect(timer, SIGNAL(timeout()), this, SLOT(sltTimeOut()));
{  
    QTimer *myTimer;  
    myTimer=new QTimer(this);  
    myTimer->start(1000);  
    connect(myTimer,SIGNAL(timeout()),this,SLOT(getDateTime()));  
}  
// QTime
qDebug() << QTime::currentTime().toString("hh:mm:ss");
void MainWindow::getDateTime()  
{  
    ui->label_time->setText(QTime::currentTime().toString());  
    ui->label_date->setText(QDate::currentDate().toString(tr("yyyy-MM-dd dddd")));  
}
```


Qt对话框
===


标准文件对话框
---
```c++
QString QFileDialog::getOpenFileName(
	QWidget *parent = 0;               //标准文件对话框的父窗口
	const QString &caption=QString();    //标准文件对话框的标题
	const QString &dir=QString();        //指定目录
	QString *selectedFilter = 0;          //文件过滤器
	Options options = 0;               //显示文件名的格式
)
```
返回文件路径和文件名

```c++
if(s.isEmpty())
	setWindowTitle(s);    //判断是否点击确认按钮
```


标准颜色对话框
---
getColor()函数时标准颜色对话框QColorDialog类的一个静态函数，数返回用户选择的颜色值，下面是getColor()函数形式:

```c++
QColor getColor(
	const QColor& initial = Qt::white,
	QWidget *parent = 0                //父窗口
);
```


标准字体对话框
---
getFont()函数是标准字体对话框QFontDialog类的一个静态函数，该函数返回用户所选择的字体

```c++
QFont getFont(
	bool *ok,
	QWidget *parent = 0
)
```


QMessageBox类
---

question()函数
```c++
StandardButton QMessageBox::question(
	QWidget *parent,
	const QString &title,                  //消息框标题
	const QString &text,               //消息框的文字提示信息
	StandardButtons buttons = Ok,     //按钮
	StandardButton defaultButton = No //默认按钮
);
```
information()函数,用于提示

```c++
StandardButton QMessageBox::information(
	QWidget *parent,
	const QString &title,
	const QString &text,
	StandardButtons buttons = Ok,
	StandardButton defaultButton = NoButton
);
```
warning()函数  
warning消息框使用QMessage Box::warning()函数完成，

```c++
StandardButton QMessageBox::warning(
	Qwidget *parent,
	const QString &title,
	const QString &text,
	StandardButtons buttons = Ok,
	StandardButton defaultButton = NoButton
)
```
critical()函数  
about()函数

toolbox类
---
实现抽屉效果



文件读写
---
QT提供了QFile文件  
QFile可以都写文本文件，也可以读写二进制文件

```c++
<QFile>
<QTextStream>
QString s;
QFile file(“a.txt”);
If(file.open(QFile::ReadOnly))
{
	QTextSream stream(&file);
	while(!stream.atEnd())
	{
	    s = stream.readLine();
	}
	file.close();
}
```
写文件例子

```c++
QFile file(“a.txt”)
if(file.open(QFile::WriteOnly | QFile::Truncate))
{
	QTextStream out(&file);
	out << tr(“hello world\n”);    //out << text->toPlainText();
	file.close();
}
```


QMainWindow 
---

是一个为用户提供的主窗口程序的类，包含菜单栏、及一个中心部件，是许多应用程序的基础。  
QMainWindow中菜单需要QMenu和QAction类来实现  
QAction类中定义了菜单的具体行为  
QMainWindow中提供了menuBar函数返回一个menuBar  
通过调用menuBar的addMenu函数就可以生成一个新的菜单项  
QMenu类addAction函数为菜单制定一个QAction  
QMainWindow中提供了自己的布局控件，所以不需要再为QMainWindow定义布局控件

```c++
open = new QAction(tr("open"), this);
open->setShortcut(tr("Ctrl+O"));
connect(open, SIGNAL(triggered()), this, SLOT(openfile()));
menu = menuBar()->addMenu(tr("file"));
menu->addAction(open);
edit = new QTextEdit();
setCentralWidget(edit);
```


网络编程
---
qt如果需要进行网络编程首先需要在.pro文件中添加  
QT += network  
在头文件中添加 

```
<QHostInfo>  
<QNetworkInterface>  
```
QHostInfor类用于获取主机信息

```c++
QString localHostName = QHostInfo::localHostName();
QHostInfo hostInfo = QHostInfo::fromName(localHostName);
QList<QHostAddress> list = hostInfo.addresses();
if(!list.isEmpty())
{
	QList<QHostAddress>::iterator i;
	for(i = list.begin(); i != list.end(); ++i)
	{
   		 QMessageBox::information(this, tr(“hint”), (*i).toString());
	}
}
```
QNetworkInterface类获取与网口相关的信息

