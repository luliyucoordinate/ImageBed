---
layout: post
title: error C2678 binary '=' 
category : cpp
tags : [cpp, error, unordered_multimap]
stickie: true
---

今天天碰到这样一个问题：对一个unordered_multimap 做有序输出，对你没听错！！！总是有这样一些稀奇古怪的问题:( !!! 我的想法很简单，对unordered_multimap内的元素做冒泡排序。

结果编译期间报错：C2678	二进制“=”: 没有找到接受“const Name”类型的左操作数的运算符(或没有可接受的转换)	

```c++
// List all elements
template<typename Container>
void list_elements(Container& container)
{
	auto& iter = container.begin();
	auto& iter2 = ++iter;
	for (; iter != container.end(); ++iter)
	{
		for (; iter2 != container.end(); ++iter2)
		{
			if ((*iter).first < (*iter2).first)
			{
				(*iter).swap(*iter2);//compliation error
			}
		}
	}
	for (const auto& element : container)
		std::cout << element.second << std::endl;
}
```
问题的关键在于我这里用的container是unordered_multimap，而这个container的swap函数是针对整体做交换。我的做法是使用pointer指向内部，比较内部变量，然后对单一变量做交换。

机智的我最后的想了一个做法，是用了一个vector作为缓冲:smile:：

```c++
// List all elements
template<typename Container>
void list_elements(Container& container)
{
	std::vector<Person> temp;
	for (const auto& element : container)
		temp.push_back(element.second);
	std::sort(temp.begin(), temp.end(), std::greater<Person>());
	for (const auto& element : temp)
		std::cout << element << std::endl;
}
```

