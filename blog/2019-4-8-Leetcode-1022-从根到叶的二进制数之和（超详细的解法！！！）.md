---
layout: post
title: Leetcode 1022：从根到叶的二进制数之和（超详细的解法！！！）
category : 算法
tags : [python, c, c++]
stickie: true
date: 2019-4-8 00:00:00
---

给出一棵二叉树，其上每个结点的值都是 `0` 或 `1` 。每一条从根到叶的路径都代表一个从最高有效位开始的二进制数。例如，如果路径为 `0 -> 1 -> 1 -> 0 -> 1`，那么它表示二进制数 `01101`，也就是 `13` 。

对树上的每一片叶子，我们都要找出从根到该叶子的路径所表示的数字。

以 **10^9 + 7** 为**模**，返回这些数字之和。 

**示例：**

<center class="half">
    <img src="https://raw.githubusercontent.com/wiki/luliyucoordinate/ImageBed/1022/2019_6_15_1.png" width="300">
</center>

```
输入：[1,0,1,0,1,0,1]
输出：22
解释：(100) + (101) + (110) + (111) = 4 + 5 + 6 + 7 = 22
```

**提示：**

1. 树中的结点数介于 `1` 和 `1000` 之间。
2. node.val 为 `0` 或 `1` 。

**解题思路**

这个问题实际上就是之前问题[Leetcode 257：二叉树的所有路径（最详细的解法！！！）](https://leetcode.com/problems/sum-of-root-to-leaf-binary-numbers/)的拓展。我们直接将之前问题的代码稍加修改即可

```python
class Solution:
    def sumRootToLeaf(self, root: TreeNode) -> int:
        mod = 10**9 + 7
        tmp = self.binaryTreePaths(root)
        res = 0
        for i in tmp:
            res += int(i, 2)
            res %= mod
        return res

    def binaryTreePaths(self, root):
        """
        :type root: TreeNode
        :rtype: List[str]
        """
        result = list()
        stack = [(root, '')]
        while stack:
            node, p = stack.pop()
            if node:
                if not (node.left or node.right):
                    result.append(p + str(node.val))

                stack += [(node.left, p+str(node.val)), (node.right, p+str(node.val))]
                
        return result
```

但是这种做法显然不是最好的，我们实际上可以采用`dfs`的方式去处理。我们不断向下遍历树的时候，通过对之前遍历过的路径和乘上`2`就可以得到根节点到当前节点的路径和。当我们遍历到叶子节点的时候，我们只需要将叶子节点对应的路径和返回即可。

```python
class Solution:
    def sumRootToLeaf(self, root: TreeNode, val = 0) -> int:
        if not root: 
            return 0
        val = (val << 1 + root.val) % (10**9 + 7)
        if root.left == root.right: 
            return val
        return (self.sumRootToLeaf(root.left, val) + self.sumRootToLeaf(root.right, val)) % (10**9 + 7)
```

我们这里的写法使用了一些`trick`，例如我们在判断叶子节点的时候通过`root.left == root.right`去做。

reference:

https://leetcode.com/problems/sum-of-root-to-leaf-binary-numbers/discuss/270025/JavaC%2B%2BPython-Recursive-Solution

**我将该问题的其他语言版本添加到了我的[GitHub Leetcode](https://github.com/luliyucoordinate/Leetcode)**

**如有问题，希望大家指出！！！**