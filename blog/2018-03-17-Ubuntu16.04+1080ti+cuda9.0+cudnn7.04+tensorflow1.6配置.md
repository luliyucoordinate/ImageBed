---
layout: post
title: Ubuntu16.04+1080ti+cuda9.0+cudnn7.04+tensorflow1.6配置
category : index
tags : [tensorflow,  cuda]
stickie: true
date: 2018-03-17 00:00:00
---

关于如何安装`Ubuntu16.04`以及显卡驱动、网卡驱动问题，你可以阅读这三篇篇

[Dell Alienware Aurora R6 （1080ti）安装Ubuntu17.04记录](http://blog.csdn.net/qq_17550379/article/details/78546850)（解决显卡驱动、系统安装）

[Ubuntu17.04+1080ti+cuda9+cudnn7+tensorflow1.4/1.3配置](http://blog.csdn.net/qq_17550379/article/details/78547648)（解决cuda9和tensorflow1.4/1.3不兼容）

[深度学习主机配置：Ubuntu16.04+1080ti+cuda8+cudnn6+tensorflow1.3](http://blog.csdn.net/qq_17550379/article/details/78655862)（解决Ubuntu16.04无线网卡驱动）

请对照选项，解决相应的问题。这里我要强调一点`显卡驱动`现在可以安装`387`（推荐安装）。这里要说的一点是：**请查清楚对应显卡驱动的稳定版本**

**我这篇文章的目的是希望给你提供一个正确的安装思路，不是对于一些问题的特解，而是一个更加广泛的解决思路**。

首先，我要先说几个重点

- 不要安装非长期支持的`Ubuntu`版本（17.04，17.10）
- `tensorflow`版本请和`cuda`、`cudnn`配套

关于第一点，如果你安装了非长期支持的版本（非`LTS`），那么你会面临的问题就会非常多。一般非长期支持版本的支持时间为1年，而长期版本的支持时间为5年。如果过了这个时间的话，不会得到软件更新支持。所以对于那些安装了这些版本的人，我建议你们还是重装系统，免得以后麻烦。这里要说的是，关于`Ubuntu 18.04LTS`的发布问题。我同要不推荐你安装，因为由于系统版本过新，所以相应的`tensorflow`和`cuda`都还没有支持。

关于第二点问题，这是本次安装的重点。你可以看到我在文章的标题写的也很详细。这是因为，你一定要对应版本匹配，否则会出现一些问题。

我们这里使用`cuda9.0`，注意不是**cuda9.1**。因为如果你通过搜索访问`cuda`的话，`nvidia`官方默认会提供给你的是最新的发布版本，但是`tensorflow`一般都还没有支持最新版本。这也是我要强调的：**请查清楚你的tensorflow版本对应的cuda版本**

<center class="half">
<img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fpftsh0k50j20fc06adg6.jpg" >
</center>

你可以通过在`nvidia`开发者官网内搜索，找到你想要的版本

<center class="half">
<img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fpfu2vpnqlj20wd0ekwgr.jpg" >
</center>

这里关于`cudnn`的安装同样，我们这里选择`cudnn7.04`的原因是：这是`tensorflow1.6`可以支持的最高版本。

<center class="half">
<img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fpfuq74i6xj20f50jzgmm.jpg" >
</center>

如果你安装错了，可以通过如下命令消除

```shell
sudo rm /usr/local/cuda/include/cudnn.h 
sudo rm /usr/local/cuda/lib64/libcudnn*
```

对于上面的方法，根据你安装文件夹的不同做相应调整。

安装`cuda`时一个有用的操作：我们在安装好`cuda`后，会编辑相应的`.bashrc`文件，我推荐你这样去写

```shell
#cuda
export PATH=/usr/local/cuda/bin${PATH:+:${PATH}} 
export LD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}} 
export CUDA_HOME=/usr/local/cuda
```

你注意到，我在写的时候`export PATH=/usr/local/cuda/bin${PATH:+:${PATH}} `，我没有将`cuda`写成相应的`cuda`版本。如`export PATH=/usr/local/cuda9.0/bin${PATH:+:${PATH}} `。这样写的好处是，我们只要将`usr/local`目录下的不同版本的`cuda`通过软连接，去链接就可以了，不用再每次安装不同的`cuda`后，去修改相应的`.bashrc`文件。

<center class="half">
<img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1fpfuh6kwm9j20dq01yglt.jpg" >
</center>

通过如下命令建立一个`cuda->cuda-9.0`的连接。

```shell
sudo ln -s cuda-9.0 cuda
```

还要提醒你要注意的一点是，安装`tensorflow`时，不要忘记后面的`-gpu`选项。

```shell
sudo pip install tensorflow-gpu
```

最后我要说的是，不要认为现在装好了就万事大吉了，因为如果`cuda`和`tensorflow`都支持了`Ubuntu 18.04LTS`的话，你最好重装系统，安装`Ubuntu 18.04LTS`。因为很多后来发表的文章对应的代码，都会使用最新的软件编写(●'◡'●)。另外，我也不推荐你使用`python 2.7`，因为`python2.7`到2020年，就不再支持相应的维护了。

<center class="half">
<img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fpfv2m366rj218o05vjrm.jpg" >
</center>

所以以上软件，你最好安装对应的`python 3.x`版本。

都2018年了，你不用`python 3.x`，你不用`c++11/14/17`，还在用那些过时的东西，你是真的**out**了。当然了，学习的过程肯定是从古典到现代的^_^ !!!