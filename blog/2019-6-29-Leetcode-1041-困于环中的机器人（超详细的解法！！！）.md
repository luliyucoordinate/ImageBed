---
layout: post
title: Leetcode 1041：困于环中的机器人（超详细的解法！！！）
category : 算法
tags : [python, c, c++]
stickie: true
date: 2019-6-29 00:00:00
---

在无限的平面上，机器人最初位于` (0, 0)` 处，面朝北方。机器人可以接受下列三条指令之一：

- `"G"`：直走 1 个单位

- `"L"`：左转 90 度

- `"R"`：右转 90 度

机器人按顺序执行指令`instructions`，并一直重复它们。

只有在平面中存在环使得机器人永远无法离开时，返回`true`。否则，返回`false`。

**示例** 1：

```
输入："GGLLGG"
输出：true
解释：
机器人从 (0,0) 移动到 (0,2)，转 180 度，然后回到 (0,0)。
重复这些指令，机器人将保持在以原点为中心，2 为半径的环中进行移动。
```

**示例** 2：

```
输入："GG"
输出：false
解释：
机器人无限向北移动。
```

**示例** 3：

```
输入："GL"
输出：true
解释：
机器人按 (0, 0) -> (0, 1) -> (-1, 1) -> (-1, 0) -> (0, 0) -> ... 进行移动。
```

**提示**：

1. `1 <= instructions.length <= 100`
2. `instructions[i] `在 `{'G', 'L', 'R'}` 中

**解题思路**

需要对指令序列做重复，那么最多重复`4`次必然可以回到起点（如果可以的话）。为什么呢？因为我们最少可以转`90`度（在保证可以回到原点的情况下）。

```python
class Solution:
    def isRobotBounded(self, instructions: str) -> bool:
        x, y, dx, dy = 0, 0, 0, 1
        instructions *= 4
        for i in instructions:
            if i == 'R': 
                dx, dy = dy, -dx
            elif i == 'L': 
                dx, dy = -dy, dx
            elif i == 'G': 
                x, y = x + dx, y + dy
        return (x, y) == (0, 0)
```

那么能不能更快？当然可以，首先我们知道最多会重复`4`次，这里的本质在于我们的旋转角度，也就是说，我们一个指令序列后，如果发生了旋转，那么必然就可以通过小于等于`4`倍的指令序列完成回到起点的操作。

但是这里还有一个边界问题没有考虑，当我们一个指令序列内旋转了`360`度怎么办？此时如果回到了起点（也就是一个指令序列就完成了），那当然好啦。如果没有的话，那我们还可以回到起点吗？当然不行，你可以将所有的指令理解为一个画圆的操作，如果最后角度相同，但是不在原点的话，如果继续执行指令的话只会离圆心越来越远。

```python
class Solution:
    def isRobotBounded(self, instructions: str) -> bool:
        x, y, dx, dy = 0, 0, 0, 1
        for i in instructions:
            if i == 'R': 
                dx, dy = dy, -dx
            elif i == 'L': 
                dx, dy = -dy, dx
            elif i == 'G': 
                x, y = x + dx, y + dy
        return (x, y) == (0, 0) or (dx, dy) != (0, 1)
```

reference:

https://leetcode.com/problems/robot-bounded-in-circle/discuss/290856/JavaC%2B%2BPython-Let-Chopper-Help-Explain

**我将该问题的其他语言版本添加到了我的[GitHub Leetcode](https://github.com/luliyucoordinate/Leetcode)**

**如有问题，希望大家指出！！！**