---
layout: post
title: VS2015+opencv3.3环境配置(win10)，超详细！！！
category : cpp
tags : [opencv, cpp]
stickie: true
---

首先[下载opencv3.3](https://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.3.0/opencv-3.3.0-vc14.exe/download)，然后安装。


<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9n8sdkj20ns0c43z8.jpg" width="400" hegiht="400">
</center>

安装完成后，接下来配置环境变量。具体步骤如下：右击此电脑→点击属性→点击更改设置→点击高级→点击环境变量→点击Path→点击编辑，如果还是不清楚的话[点击这里](https://jingyan.baidu.com/article/6079ad0e99bb8228ff86db2b.html)

<center class="half">
    <img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1fkda9nnk93j20m20ll75b.jpg" width="400" hegiht="400">
</center>

点击新建，将我们安装opencv3.3的位置下的`bulid\x64\vc14\bin` 加入。

<center class="half">
    <img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fkda9o3q8pj20it0ig0tz.jpg" width="400" hegiht="400">
</center>

打开VS2015，新建一个项目文件

<center class="half">
    <img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fkda9oil46j21cp0sfaeu.jpg" width="600" hegiht="600">
</center>

新建一个win32控制台应用程序，名称可以自己取一个

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9p13z2j20wq0mpabn.jpg" width="400" hegiht="400">
</center>

勾选上空项目

<center class="half">
    <img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fkda9pe0iej20oo0jnjrp.jpg" width="400" hegiht="400">
</center>

右击**源文件文件夹**，添加新文件，文件名自己随便取一个

<center class="half">
    <img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1fkda9ps55fj21bj0rqtb9.jpg" width="600" hegiht="600">
</center>

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9q4sw8j20wq0mp0tn.jpg" width="400" hegiht="400">
</center>

点击视图→点击其他窗口打开属性管理器

<center class="half">
    <img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fkda9qx2maj21ff0u0dlq.jpg" width="600" hegiht="600">
</center>

在属性管理器栏中，选中`Debug|Win64中的Microsoft.Cpp.x64.user`，右键点击**属性**进入属性界面

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9r9m1sj21ff0u077x.jpg" width="600" hegiht="600">
</center>

点击VC++目录→点击包含目录→点击编辑

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9rniuhj20uf0kc400.jpg" width="400" hegiht="400">
</center>

将之前的安装目录下的这三个目录添加进去

```
F:\openCV\opencv\build\include
F:\openCV\opencv\build\include\opencv
F:\openCV\opencv\build\include\opencv2
```

<center class="half">
    <img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fkda9s0627j20en0ew3yy.jpg" width="400" hegiht="400">
</center>

做好这个后，回到VC++目录→点击库目录→点击编辑

<center class="half">
    <img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1fkda9scu1xj20uf0kcgn2.jpg" width="400" hegiht="400">
</center>

将之前的安装目录下的这个目录添加进去

```
F:\openCV\opencv\build\x64\vc14\lib
```

<center class="half">
    <img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1fkda9srx3aj20en0ewjrv.jpg" width="400" hegiht="400">
</center>

在`F:\openCV\opencv\build\x64\vc14\lib`目录下有这样两个文件`opencv_world330.lib`和`opencv_world330d.lib`，文件的区别是一个没有`d`结尾的对应的时**release**版，以`d`结尾的文件对应的是**debug**版。

<center class="half">
    <img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1fkda9tj6wbj20j50kwaay.jpg" width="400" hegiht="400">
</center>

做好这个后，回到初始的目录，点击链接器→点击输入→点击附加依赖项→点击编辑

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9t4zfxj20uf0kcabj.jpg" width="400" hegiht="400">
</center>

我这里将`debug`版（`opencv_world330d.lib`）添加进去，当然你也可以添加`release`版。

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9tuwslj20en0ewjrn.jpg" width="400" hegiht="400">
</center>

接着你要设置VS2015是**x64**和`debug`

<center class="half">
    <img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1fkda9u8qsfj20su04q3z2.jpg" width="400" hegiht="400">
</center>

所有东西都配置好了，接下来测试能不能用opencv。代码如下：

```cpp
#include <iostream>  
#include <opencv2/core/core.hpp>  
#include <opencv2/highgui/highgui.hpp>  

using namespace cv;

int main() {  
	Mat img = imread("avatar.jpg");
	// 在窗口中显示avatar  
	imshow("avatar", img);
	// 等待6000 ms后窗口自动关闭    
	waitKey(6000);
}
```

我在运行时发现报出如下错误：

<center class="half">
    <img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1fkda9uk8kxj20jg0bgaaa.jpg" width="400" hegiht="400">
</center>

原来我把测试图片的位置放错了。正确的做法是：

<center class="half">
    <img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1fkda9uws7cj216u0p4t9m.jpg" width="600" hegiht="600">
</center>

最后程序正常运行^_^!!!

<center class="half">
    <img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1fkda9vbrz5j21810pogom.jpg" width="400" hegiht="400">
</center>
