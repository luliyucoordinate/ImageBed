---
layout: post
title: 分配器 allocators
category : cpp
tags : [cpp, stl, 分配器]
stickie: true
---

```c++
template<typename _Tp, typename _Alloc = std::allocator<_Tp>>
class vector:protected _Vector_base<_Tp, _Alloc>
template<typename _Tp, typename _Alloc = std::allocator<_Tp>>
class list:protected _List_base<_Tp, _Alloc>
template<typename _Tp, typename _Alloc = std::allocator<_Tp>>
class deque:protected _Deque_base<_Tp, _Alloc>
template<typename _Key, typename _Compare = std::less<_Key>, 
		typenaem _Alloc = std::allocator<_Key>>
class set
template<typename _Key, typename _Tp, typename _Compare = std::less<_Key>, 
		typename _Alloc = std::allocator<std::pair<const _Key, _Tp>>
class map
template<class _Value, class _Hash = bash<_Value>,
		class _Pred = std::equal_to<_Value>,
		class _Alloc = std::allocator<_Value>>
class unordered_set
template<class _Value, class _Hash = bash<_Value>,
		class _Pred = std::equal_to<_Key>,
		class _Alloc = std::allocator<_Value>>
class unordered_map
```

一般写法

```c++
int *p;
allocator<int> alloc1;
p = alloc.allocate(1);
alloc1.deallocate(p, 1);
```

特殊写法

```c++
__gnu_cxx::malloc_allocator<int> alloc2;
__gnu_cxx::new_allocator<int> alloc2;
__gnu_cxx::__pool_allocator<int> alloc2;
__gnu_cxx::__mt_allocator<int> alloc2;
__gnu_cxx::bitmap_allocator<int> alloc2;
```
不建议用分配器，应该用容器，new malloc
